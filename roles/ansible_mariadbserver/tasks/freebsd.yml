- name: Install mariadb and associated packages
  package:
    name: "{{ mariadbserver_packages }}"
    state: present
- name: Install PyMysql dependency
  package:
    name: py38-pymysql
    state: present
- name: Install mariadb server configuration
  template:
    src: mariadb-server.cnf.j2
    dest: "{{ mariadbserver_etcpath }}/{{ mariadbserver_etcfile }}"
  notify: restart mariadb
- name: enable mariadb server
  service:
    name: "{{ mariadbserver_servicename }}"
    enabled: yes
    state: started
- name: Install packages for phpmyadmin
  package:
    name: "{{ mariadbserver_packagesmyadmin }}"
    state: present
- name: include nginxphp role for phpmyadmin
  include_role:
    name: imp1sh.ansible_managemynetwork.ansible_nginxphp
